(function(){var n="0.2.1",t,e="undefined",a=25,r=parseInt(1e3/a),o=t,i={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"522",instanceID:"externalConf###Instanceid"},u=function(n){return typeof n!==e},c="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=u(window[c])&&1==window[c];var f=function(){return s.instanceID},d="_HistatsCounterGraphics_",l,m=function(){return d+s.counterID},h=function(n){return!("string"!=typeof n||""==n)},v=function(){try{s.DEBUG_MODE&&u(console)&&console.log.apply(this,arguments)}catch(n){}},p=function(e,a){var i=e||{};try{var c=function(n){var t="autostart";return"undefined"!=typeof n[t]&&n[t]===!0},f={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:c(i),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},d=function(){return f.INSTANCE_ID},h=100,p=1,g=function(){return a.document},A=function(n){return u(n)&&!!g().getElementById(n)},b=function(n){o=a.setTimeout(n,r)},w=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.msRequestAnimationFrame||a.oRequestAnimationFrame||b,T=a["Date"]||{},C=function(n,t){for(var e in n)t.hasOwnProperty(e)&&(t[e]=n[e])};i.getInstanceID=d;var O=m();i.IS_HISTATS_CANVAS=!0,i.globalObjectName=O,i.$window=a;var S=function(n){return A(n)?g().getElementById(n):t},I={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},_={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:t,customization:{}},N={domCanvasObject:null,canvas2dContext:null,canvasProperties:I},y=function(){var n={},e=n.hasOwnProperty,a=0,r=0,o={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},i=function(t){return e.call(n,t)},s=function(t){return o.printMessages&&console.log(d(),"addTopic",t),r++,o.topicsCount++,r>50&&v(d(),"Lot of topics registered!",t),n[t]=[]},u=function(t){return n[t]},c=function(t,e,r){o.printMessages&&console.log(d(),"subscribe",t,e,r),o.recordMessages&&o.messageLog.push(["subscribe",t,e,r]),r=r||h,i(t)||s(t);var c=u(t).push({callback:e,priority:e})-1;return a++,o.subscribersCount++,a>50&&v(d(),"Lot of topics registered!",t),{remove:function(){delete n[t][c]}}},f=function(n,t){var e="no-topic-found";n!=e&&l(e,{topic:n,info:t})},l=function(e,a){if(o.messagePassedCount++,o.printMessages&&console.log(d(),"publish",e,a),o.recordMessages&&o.messageLog.push(["publish",e,a]),!o.blockMessages)return i(e)?(n[e].slice().sort(function(n,t){return n.priority-t.priority}).forEach(function(n){n.callback(a!=t?a:{})}),void 0):(f(e,a),void 0)},m=function(n,t){w(function(){l(n,t)})};return{subscribe:c,publish:l,publishAsync:m,debugObj:o}}(),x=function(){return s.counterID},P=function(){var n="siteId";return i[n]=i[n]||0},M=function(){var n="main_div_name";return i[n]||"histats_counter_"+P()+"_"+x()},F=[],E=function(){return l=M(),l},B=function(){return E()+"_canvas"},D=function(){return"http://www.histats.com/viewstats/?sid="+P()+"&ccid="+x()},z=function(){a.location=D()},R=function(){if(1==N.canvasProperties.doMouseOverOut){var n=J().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}J().domCanvasObject.style.cursor="pointer"},L=function(){if(1==N.canvasProperties.doMouseOverOut){var n=J().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},U=function(){var n=J(),t=n.canvasProperties,e=n.canvas2dContext;e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.shadowBlur=t.shadowBlur,e.shadowColor="rgba(0,0,0,0.2)"},k=function(){return S(E())},G=function(){var n=!!k();return n},j=function(){try{if(!G())return y.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=k(),t=J().canvasProperties,e='<canvas id="'+B()+'" width="'+t.w+'" height="'+t.h+'" ></canvas>',r='<a href="'+D()+'" target="_blank">'+e+"</a>";n.innerHTML=r,J().domCanvasObject=S(B());var o=J().domCanvasObject;J().canvas2dContext=o.getContext("2d"),"addEventListener"in a?(o.addEventListener("mouseover",function(){R()}),o.addEventListener("mouseout",function(){L()})):o.onclick=function(){z()}}catch(i){v(d(),"drawCanvas",i)}},H=function(){try{if(f.ANIMATION_STARTED)return;if(f._STOPPED)return;y.publish("draw-callback-requested-reconfiguration",{}),y.publish("starting_pre",{context:i}),f.ANIMATION_STARTED=!0,y.publish("started",{context:i}),y.publish("drawcanvas_pre",{context:i}),j(),y.publish("drawcanvas_post",{context:i}),Q(),y.publish("animationLoop_started",{context:i})}catch(n){v(d(),"startNow",n,n.message)}},q=function(n,t,e){t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent?t.attachEvent("on"+n,e):t[n]=e},X=function(){try{y.publish("appendedStart",{context:i,type:"animFrame"}),w(H)}catch(n){v(d(),"startAsap",n.message,n)}},Y=function(n,t){F.push({name:n,callback:t})},V=function(){},Z=function(){F.forEach(function(n){n.callback(i.getCanvas2dContext(),_,J())})},K=function(){u(o)&&a.clearTimeout(o)},Q=function(){f._STOPPED||w(function(){tn(Z),f.ANIMATION_RUNNING_STATUS&&Q()})};y.subscribe("setAnimationProperties",function(n){C(n,_)}),y.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){F.push({name:n.name,callback:n.cb,priority:n.priority})}),F=F.slice().sort(function(n,t){return n.priority-t.priority})}catch(t){v(d(),"animationLoop",t.message,t)}}),y.subscribe("configuration-changed",function(n){F=[],y.publish("draw-callback-requested-reconfiguration",{})});var W=function(n){var t=n!=f.ANIMATION_RUNNING_STATUS;return t&&(0==f.ANIMATION_RUNNING_STATUS&&1==n,1==f.ANIMATION_RUNNING_STATUS&&0==n&&K(),f.ANIMATION_RUNNING_STATUS=n),t},J=function(){return N},$=function(){var n=!1;0==_.frameCounter&&y.publish("FIRST-FRAME",{});var t=T.now(),e=t-_.msLastFrameDrawn;if(e>_.msPerFrame){var a=e%_.msPerFrame;_.msLastFrameDrawn=t-a,n=!0}return n},nn=function(){if(!(_.animation_duration_inFrames<1)){var n=_.animation_duration_inFrames+_.waitframesBetweenTwoAnimations;_.currentLoopFrame=_.frameCounter%n;var t=0==_.currentLoopFrame,e=_.currentLoopFrame>=_.animation_duration_inFrames;t&&(_.isInAnimationTransition=!0,y.publish("drawing-triggered-animation-start",_)),e&&_.isInAnimationTransition&&(_.isInAnimationTransition=!1,y.publish("drawing-triggered-animation-end",_))}},tn=function(n){var t=$();t&&(_.frameCounter++,nn(),n())},en=function(n){return n(i.getCanvas2dContext())},an=function(){var n=17,t=2,e=1,a=J().canvasProperties,r=0;a.hasShadow&&(r=r+t+e),a.hasLabel&&(a.h=a.h+n),a.w=a.w+r,a.h=a.h+r},rn=function(n){C(n,J().canvasProperties),an()};y.subscribe("setCanvasProperties",rn,10);var on=function(){i.onCanvas2dContext(function(n){var t=J().canvasProperties;n.clearRect(0,0,t.w,t.h),t.hasShadow&&U()})};y.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,t){J().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},un=function(n,e){e.autoTriggerTextChange_onFrame!==t&&e.currentLoopFrame==e.autoTriggerTextChange_onFrame&&y.publish("drawing-change-text",{})},cn=function(n){y.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:un,priority:5,name:"autoUpdateText"}]})};y.subscribe("draw-callback-requested-reconfiguration",cn,15),i.__CODE_VERSION=n,i.getCanvasObject=J,i.getCanvas2dContext=function(){return J().canvas2dContext},i.onCanvas2dContext=en,i.getXYCanvas=function(){return{x:J().canvasProperties.xBase,y:J().canvasProperties.yBase}},i.addDrawCallback=Y,i.getCanvasProperties=function(){return J().canvasProperties},i.setCanvasProperties=function(n){for(var t in n)n.hasOwnProperty(t)&&(N.canvasProperties[t]=n[t])},i.updateCanvasProperties=function(n){i.setCanvasProperties(n(J().canvasProperties))},i.getAnimationFrames=function(){return _.frameCounter},i.getAnimationControl=function(){return _},i.setAnimationControl=function(n){for(var t in n)n.hasOwnProperty(t)&&(_[t]=n[t])},i.start=X,i.changeRunningStatus=W,i.getRunningStatus=function(){return f.ANIMATION_RUNNING_STATUS},i.eventBus=y,i.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.effectLightLine={},e=function(n,t){a.colorStops.push({position:n,colour:t})},a={x:0,y:0,width:0,height:0,colorStops:[]},r=function(n){var t=n.createLinearGradient(a.x,a.y,a.x+a.width,a.y);a.colorStops.forEach(function(n){t.addColorStop(n.position,n.colour)}),n.fillStyle=t,n.fillRect(a.x,a.y,a.width,a.height)};t.addColorStop=e,t.draw=r,t.getProperties=function(){return a},t.setProperties=function(n,t,e,r){a.x=n,a.y=t,a.width=e,a.height=r}}.call(i),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e={main:"",source:t,loaded:!1};e.main="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAUCAMAAAAHtrtKAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAF3UExURQAAAGt7a8zMzM/Pz8zMzM7Ozri8uMzMzMzMzMzMzK+xrpSakszMzM7Ozn2CesnJycfHx21zary8vLS0tLG0sMzMzPj4+Pr6+vv7+9nZ2eHh4f39/fb29v///9bW1vT09JCQkPLy8nZ2dn19fYqKioODg+Dg4PHx8dvb2+bm5tLS0uPj47GxsdHR0evr697e3u/v76SkpGlpaejo6Onp6Z2dnZeXl3BwcO3t7erq6sLCwsfHx66urpSUlMDBv/z8/N3d3ba2tqCgoLi4uLOzs7y8vIuLi8HBwY2NjZWVlZubm6WlpWZmZvPz85qamuTk5Nzc3Lq6utjY2KKios3NzYWFhfn5+d/f3/f399ra2rm5ufX19aGhobe3t9fX16ioqOzs7L29vZiYmOfn56ampsTExOXl5cnJydPT09HT0dDR0K2trcjJx7W1tb6+vtTU1LCwsL+/v7S0tOLi4sjIyKqqqsrKypOTk87Ozqenp5ycnM/Pz3p6eqRXh60AAAAVdFJOUwAf3+8PL5/vv2/Pn58fYMWoUm8p3x1SyzQAAAJESURBVDjLpZTXW9swFMXVFkjoXnJIqhDZluVtZzjOJBAIIYO9R9l07z3/+F4F+sz34d/DPdI5uudRCKGh0Xg8hq9KPD46hIDh2FZWHktfFTm7FRtG6E6s8iQiCzeuodv2WGTsERTLJCKTuY7wphSZTYywRMj8vEXq84zUfywRgWGVyX8si1yKBDXbmUw+72bq+XbmL6igfaGCfD5zKdtQQ2S5VHJlp0Tl/m9bluWkS0vTrhy4rhuIzEmB+UIMkblJMZODy9xcsOtCQKBmT9cVpTOxoUyAWnpSVVoTitLSYYAFHphVMQBQpZXqnCctZYD6Xd+DGt3z1AEnoH+8M7WDT9Q3H6rqRlFVq+C9515b7XLPEw+7/aOz88RXVZBOUW17OtSUTVPTvnJH64Gumz3tuNzTjOyh9kma056CJ1VgVALTNNe1tYR02tN+imRFW5QWteOEppllqPFsmzGrssKmQbHVZdieZs2Dz6yOPw682lSNMdO2mlMHrIux/Yv1cZ/Vm2zNXmPNCmO2BzUB55RiPkNzQnOUfuHrlM4sU0pz4O2CCSfOF2k9gJRiiwqSYiFHZ04p5QFGjefcdxzLrzmzQg9zPvcrz4orS6vF8B14R/shDh3b96thzZf3w9AprH4Li74pFmadmuk43MTo5jI3CEkZBZIVShKmYRjZybJRkNI6eFML6aU05OAVxOU8mTQHC1lSSBHClx+jW5ZtJCOxY1sjCDXGUzvjEUjy1cYjhO42Xr5KReD1W/xQfH8P7uNI3IOOf5ntwT8YZvD4AAAAAElFTkSuQmCC";var a=function(t){var a=e.source=new Image;a.onload=function(){e.loaded=!0,n.eventBus.publish("background-image-loaded",e),n.eventBus.publish("configuration-changed",{})},a.src=e.main};n.eventBus.subscribe("FIRST-FRAME",a,5),n.image_base64_src=e}.call(i),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.counter={};e.ID="522",e.properties={w:70,h:20,hasShadow:!0};var a=!1,r={backgroundImageObject:t},o={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110};n.eventBus.publish("setCanvasProperties",e.properties),n.eventBus.publish("setAnimationProperties",o);var i={light:{x:0,y:0,w:20,h:20,movementsPerFrame:1,xStart:0,xEnd:60}},s=function(n){var t=i;t.light.movementsPerFrame=(i.light.xEnd-i.light.xStart)/o.animation_duration_inFrames};s(o.animation_duration_inFrames);var u=function(t){var e=i,a=n.getXYCanvas();e.light.x+=e.light.movementsPerFrame;var r=t.createLinearGradient(a.x+e.light.x,a.y+e.light.y,a.x+e.light.x+e.light.w,a.y+e.light.y);r.addColorStop(0,"rgba(255,255,255,0)"),r.addColorStop(.5,"rgba(255,255,255,1)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=r,t.fillRect(a.x+e.light.x,a.y+e.light.y,e.light.w,e.light.h)},c=function(t,e){n.eventBus.publish("clear-canvas-rectangle",{});var a=n.getXYCanvas();t.drawImage(r.backgroundImageObject.source,a.x,a.y)},f=function(n,t){var e=i;t.isInAnimationTransition?u(n):e.light.x=e.light.xStart},d=function(e){r.backgroundImageObject!=t&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:c,priority:10,name:"drawBackground"},{cb:f,priority:17,name:"executeAnimationTransition"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",d,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(i),f.AUTOSTART&&i.start()}catch(fn){}return i},g="base.js",A=window,b="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=u(window[b])&&window[b]===!0,window[m()]=p,window["histats_canvascounters_"+g]=p}).call(this);